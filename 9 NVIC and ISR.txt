#include "stm32f4xx.h"
void delayMs(int n);
int main(void)
{
	RCC->AHB1ENR |= 9; 
	RCC->APB2ENR |= (1<<14); 
	GPIOD->MODER |= 0x11000000; 
	GPIOA->MODER &= ~(0x00000003); 
	SYSCFG->EXTICR[0]&=~(0xF<<0); 
	EXTI->IMR |= (1<<0); 
	EXTI->RTSR |= (1<<0); 
	EXTI->FTSR &= ~(1<<0); 
     NVIC->ISER[0] |= (1<<6);
      while(1)
          {
			GPIOD->BSRRL = 0x1000; 
			delayMs(300);
			GPIOD->BSRRH = 0x1000; 
			delayMs(300);
          }
     }
     void EXTI0_IRQHandler(void)
     {
           int i;
           for(i=0;i<3;i++)
           {
				GPIOD->BSRRL = 0x4000; 
				delayMs(300);
				GPIOD->BSRRH = 0x4000; 
				delayMs(300);
           }
           EXTI->PR |=(1<<0);
     }
     void delayMs(int n)
     {
       int i;
       for (; n > 0; n--)
         for (i = 0; i < 3195; i++) ;
     }

	PRESERVE8
Stack EQU 0X00000100
	AREA STACK ,NOINIT ,READWRITE ,ALIGN=4
StackMem SPACE Stack
	AREA RESET ,DATA ,READONLY ,ALIGN=4
	EXPORT __Vectors
__Vectors
	DCD StackMem + Stack
	DCD Reset_Handler
	AREA tempData ,DATA ,READONLY ,ALIGN=4
ROMARRAY DCD 0X01,0X02,0X03,0X04,0X05,0X06,0X07,0X08
	AREA |.data| ,DATA ,READWRITE ,ALIGN=4
LEN EQU 0X08
NOOVERLAP EQU 0X08
ARRAY SPACE 32
	AREA |.text| ,CODE ,READONLY ,ALIGN=4
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
Reset_Handler_End
	MOV R0 ,#0X10
	LDR R1 ,= ROMARRAY + 28
	LDR R2 ,= ARRAY + 28
MEMCPY_LOOP
	LDR R3 ,[R1] ,#-4
	STR R3 ,[R2] ,#-4
	SUBS R0 ,R0 ,#1
	BNE MEMCPY_LOOP
	MOV R0 ,#LEN
	LDR R1 ,= ARRAY + 28
	LDR R2 ,= ARRAY + 28 + NOOVERLAP
TRANSFER_LOOP
	LDR R3 ,[R1] ,#-4
	STR R3 ,[R2] ,#-4	
	SUBS R0 ,R0 ,#1
	BNE TRANSFER_LOOP
STOP B STOP
	END
	

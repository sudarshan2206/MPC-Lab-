	PRESERVE8
Stack EQU 0X00000100
	AREA STACK ,NOINIT ,READWRITE
StackMem SPACE Stack
	AREA RESET ,DATA ,READONLY
	EXPORT __Vectors
__Vectors
	DCD StackMem + Stack
	DCD Reset_Handler
	AREA |.text| ,CODE ,READONLY
	ENTRY
	EXPORT Reset_Handler
Reset_Handler
Reset_Handler_End
	LDR R1 ,=0X20000000
	LDR R2 ,[R1]
	LDR R3 ,[R1 ,#4]
	LDR R4 ,[R1 ,#8]
	LDR R5 ,[R1 ,#12]
	LDR R6 ,[R1 ,#16]
	CMP R2 ,#1
	BNE C_SUB
	ADDS R7 ,R3 ,R5
	ADC  R6 ,R4 ,R6
	B LAST
C_SUB CMP R2 ,#2
	BNE C_MUL
	SUBS R7 ,R3 ,R5
	SBC  R6 ,R4 ,R6
	B LAST
C_MUL CMP R2 ,#3
	BNE DEFAULT
	UMULL R7 ,R8 ,R3 ,R5
	UMULL R9 ,R10 ,R3 ,R6
	UMULL R6 ,R3 ,R4 ,R6
	ADDS R8 ,R8 ,R9
	ADCS R9 ,R10 ,R6
	ADC R10 ,R3 ,#0
	UMULL R5 ,R3 ,R4 ,R5
	ADDS R8 ,R8 ,R5
	ADCS R9 ,R9 ,R3
	ADC R10 ,R10 ,#0
DEFAULT MOV R7 ,#0
		MOV R8 ,#0
		MOV R9 ,#0
		MOV R10 ,#0
LAST STR R7 ,[R1 ,#20]
	 STR R8 ,[R1 ,#24]
	 STR R9 ,[R1 ,#28]
	 STR R10 ,[R1 ,#32]
STOP B STOP
	END
	
	
